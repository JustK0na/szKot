CREATE TABLE pasazerowie (
    id_pasażera INT AUTO_INCREMENT PRIMARY KEY,
    imie VARCHAR(100),
    nazwisko VARCHAR(100),
    mail VARCHAR(100) UNIQUE,
    telefon VARCHAR(20),
    haslo_plain VARCHAR(100),
    haslo VARCHAR(100)
);

CREATE TABLE stacje_kolejowe (
    id_stacji INT AUTO_INCREMENT PRIMARY KEY,
    nazwa_stacji VARCHAR(100),
    miasto VARCHAR(100)
);

CREATE TABLE przewoznicy (
    id_przewoznika INT AUTO_INCREMENT PRIMARY KEY,
    nazwa VARCHAR(100)
);

CREATE TABLE linie_kolejowe (
    id_linii INT AUTO_INCREMENT PRIMARY KEY,
    nazwa_linii VARCHAR(100),
    id_stacji INT,
    id_przewoznika INT,
    FOREIGN KEY (id_stacji) REFERENCES stacje_kolejowe(id_stacji),
    FOREIGN KEY (id_przewoznika) REFERENCES przewoznicy(id_przewoznika)
);

CREATE TABLE wagony (
    id_wagonu INT AUTO_INCREMENT PRIMARY KEY,
    liczba_miejsc INT
);

CREATE TABLE pociagi (
    id_pociągu INT AUTO_INCREMENT PRIMARY KEY,
    model_pociągu VARCHAR(100),
    id_przewoźnika INT,
    id_aktualna_stacja INT,
    stan VARCHAR(50),
    id_wagonu INT,
    FOREIGN KEY (id_przewoźnika) REFERENCES przewoznicy(id_przewoznika),
    FOREIGN KEY (id_aktualna_stacja) REFERENCES stacje_kolejowe(id_stacji),
    FOREIGN KEY (id_wagonu) REFERENCES wagony(id_wagonu)
);

CREATE TABLE polaczenia (
    id_połączenia INT AUTO_INCREMENT PRIMARY KEY,
    id_lini INT,
    id_stacji_początkowej INT,
    id_stacji_końcowej INT,
    id_pociągu INT,
    czas_przejazdu TIME,
    data DATE,
    opóźnienie TIME,
    FOREIGN KEY (id_lini) REFERENCES linie_kolejowe(id_linii),
    FOREIGN KEY (id_stacji_początkowej) REFERENCES stacje_kolejowe(id_stacji),
    FOREIGN KEY (id_stacji_końcowej) REFERENCES stacje_kolejowe(id_stacji),
    FOREIGN KEY (id_pociągu) REFERENCES pociagi(id_pociągu)
);

CREATE TABLE bilety (
    id_biletu INT AUTO_INCREMENT PRIMARY KEY,
    id_pasażera INT,
    id_połączenia INT,
    cena DECIMAL(10, 2),
    ulgi ENUM('None', 'Student', 'Senior', 'Weteran', 'Dziecko'),
    FOREIGN KEY (id_pasażera) REFERENCES pasazerowie(id_pasażera),
    FOREIGN KEY (id_połączenia) REFERENCES polaczenia(id_połączenia)
);